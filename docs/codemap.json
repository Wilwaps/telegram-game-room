{
  "project": "telegram-game-room",
  "baseline": "clean-install",
  "generatedAt": "2025-10-11T21:22:00-04:00",
  "env": {
    "PORT": 3000,
    "ALLOW_TEST_RUNNER": "true|false",
    "ADMIN_USERNAME": "wilcnct",
    "ADMIN_CODE": "<env>"
  },
  "directories": [
    { "path": "backend/", "desc": "Servidor Express" },
    { "path": "backend/config/", "files": ["config.js", "logger.js"] },
    { "path": "backend/services/", "files": ["memoryStore.js"] },
    { "path": "backend/middleware/", "files": ["adminAuth.js"] },
    { "path": "backend/routes/", "files": ["economy.js", "economy_ext.js", "xp.js"] },
    { "path": "frontend-v2/", "desc": "UI base (vacío)" },
    { "path": "scripts/", "desc": "utilidades (vacío)" },
    { "path": "docs/xyzworld/", "desc": "PRD, arquitectura, APIs, modelos, UI/UX, QA, roadmap" },
    { "path": "testsprite_tests/", "desc": "pruebas auto/QA" }
  ],
  "endpoints": [
    { "method": "GET", "path": "/health", "auth": false, "desc": "Healthcheck", "returns": { "success": true, "status": "ok", "time": "number" } },

    { "method": "GET", "path": "/api/economy/supply", "auth": false, "desc": "Resumen de supply" },
    { "method": "GET", "path": "/api/economy/supply/txs", "auth": false, "desc": "Transacciones de supply (limit/offset)" },
    { "method": "GET", "path": "/api/economy/supply/stream", "auth": false, "desc": "SSE supply" },
    { "method": "POST", "path": "/api/economy/supply/burn", "auth": "admin", "desc": "Quemar supply" },

    { "method": "GET", "path": "/api/economy/users", "auth": false, "desc": "Lista de usuarios (cursor/limit/search)" },
    { "method": "GET", "path": "/api/economy/history/{userId}", "auth": false, "desc": "Historial de usuario (limit/offset)" },

    { "method": "GET", "path": "/api/economy/sponsors", "auth": false, "desc": "Lista de sponsors" },
    { "method": "POST", "path": "/api/economy/sponsors/add", "auth": "admin", "desc": "Crear sponsor con opcional key y saldo inicial" },
    { "method": "POST", "path": "/api/economy/sponsors/remove", "auth": "admin", "desc": "Eliminar sponsor" },
    { "method": "POST", "path": "/api/economy/sponsors/set-meta", "auth": "admin", "desc": "Actualizar descripción de sponsor" },
    { "method": "POST", "path": "/api/economy/sponsors/set-key", "auth": "admin", "desc": "Asignar clave de sponsor" },
    { "method": "POST", "path": "/api/economy/sponsors/remove-key", "auth": "admin", "desc": "Quitar clave de sponsor" },
    { "method": "POST", "path": "/api/economy/transfer", "auth": "sponsor", "desc": "Transferir fuegos con key de sponsor" },
    { "method": "POST", "path": "/api/economy/grant-from-supply", "auth": "admin", "desc": "Conceder desde supply" },

    { "method": "GET", "path": "/api/xp/config", "auth": false, "desc": "Obtener umbrales XP" },
    { "method": "POST", "path": "/api/xp/config", "auth": "admin", "desc": "Actualizar umbrales XP" }
  ],
  "middlewares": [
    "helmet",
    "cors",
    {
      "name": "express-rate-limit",
      "skip": "ALLOW_TEST_RUNNER=true OR NODE_ENV!=production, AND (UA contains testsprite/chrome devtools OR X-Test-Runner=testsprite)"
    }
  ],
  "sse": [
    { "path": "/api/economy/supply/stream", "desc": "Supply SSE" }
  ],
  "sockets": [],
  "build": { "node": ">=16" },
  "scripts": {
    "start": "node backend/server.js",
    "dev": "node -r dotenv/config backend/server.js dotenv_config_path=.env.local"
  }
}
